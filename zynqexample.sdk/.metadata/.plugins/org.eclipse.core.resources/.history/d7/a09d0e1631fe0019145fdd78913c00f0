/*
 * uart_controller.c
 *
 *  Created on: Nov 3, 2019
 *      Author: Dickbutt
 */
#include "uart_controller.h"
extern XUartLite uart_xMainDriver;

#if UART_USEXPRINTF == TRUE

int uart_begin()
{
	XUartLite_Initialize(&uart_xMainDriver, XPAR_UARTLITE_0_DEVICE_ID);
}

int uart_write(unsigned char * buffer, unsigned int size)
{
	xil_printf(buffer);
}

unsigned char uart_getchar()
{
	return XUartLite_RecvByte(UART_BASEADDRESS);
}

#else

int uart_begin()
{
	XUartLite_Initialize(&uart_xMainDriver, XPAR_UARTLITE_0_DEVICE_ID);
}

int uart_write(unsigned char * buffer, unsigned int size)
{
	return XUartLite_Send(&uart_xMainDriver, buffer, size);
}

unsigned char uart_getchar()
{
	return XUartLite_RecvByte(UART_BASEADDRESS);
}
#endif
